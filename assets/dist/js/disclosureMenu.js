(()=>{var e=function(e){this.container=document,this.rootNode=e,this.triggerNodes=[],this.controlledNodes=[],this.openIndex=null,this.useArrowKeys=!0};window.addEventListener("load",(function(t){for(var o=document.querySelectorAll(".disclosure-menu"),n=[],i=0;i<o.length;i++)n[i]=new e(o[i]),n[i].init()}),!1),e.prototype.init=function(){for(var e=this.rootNode.querySelectorAll(".disclosure-menu-toggle"),t=0;t<e.length;t++){var o=e[t],n=o.parentNode.querySelector("ul");n&&(this.triggerNodes.push(o),this.controlledNodes.push(n),o.setAttribute("aria-expanded","false"),this.toggleMenu(n,!1),n.addEventListener("keydown",this.handleMenuKeyDown.bind(this)),o.addEventListener("click",this.handleButtonClick.bind(this)),o.addEventListener("keydown",this.handleButtonKeyDown.bind(this)))}var i=this.container.querySelector(".mobile-menu-toggle"),s=this.container.querySelector("#mobile-menu");s&&(this.triggerNodes.push(i),this.controlledNodes.push(s),s.addEventListener("keydown",this.handleMenuKeyDown.bind(this)),i.addEventListener("click",this.handleButtonClick.bind(this)),i.addEventListener("keydown",this.handleButtonKeyDown.bind(this))),this.rootNode.addEventListener("focusout",this.handleBlur.bind(this)),this.container.addEventListener("keydown",this.handleKeyDown.bind(this))},e.prototype.toggleMenu=function(e,t){e&&(t?"mobile-menu"===e.id?e.classList.remove("hidden"):(e.classList.remove("hidden"),e.classList.add("show")):"mobile-menu"===e.id?e.classList.add("hidden"):(e.classList.add("hidden"),e.classList.remove("show")))},e.prototype.toggleExpand=function(e,t){this.triggerNodes[e]&&(this.openIndex=t?e:null,this.triggerNodes[e].setAttribute("aria-expanded",t),this.toggleMenu(this.controlledNodes[e],t))},e.prototype.controlFocusByKey=function(e,t,o){switch(e.key){case"ArrowUp":case"ArrowLeft":if(e.preventDefault(),o>-1)t[Math.max(0,o-1)].focus();break;case"ArrowDown":case"ArrowRight":if(e.preventDefault(),o>-1)t[Math.min(t.length-1,o+1)].focus();break;case"Home":e.preventDefault(),t[0].focus();break;case"End":e.preventDefault(),t[t.length-1].focus()}},e.prototype.closeAllMenus=function(){for(var e=this.rootNode.querySelectorAll("button[aria-expanded][aria-controls]"),t=0;t<e.length;t++){var o=e[t],n=o.parentNode.querySelector("ul");n&&(this.triggerNodes.push(o),this.controlledNodes.push(n),o.setAttribute("aria-expanded","false"),this.toggleMenu(n,!1))}var i=this.container.querySelector(".mobile-menu-toggle"),s=this.container.querySelector("#mobile-menu");s&&(this.triggerNodes.push(i),this.controlledNodes.push(s),i.setAttribute("aria-expanded","false"),this.toggleMenu(s,!1))},e.prototype.handleBlur=function(e){this.rootNode.contains(e.relatedTarget)||null===this.openIndex||this.toggleExpand(this.openIndex,!1)},e.prototype.handleKeyDown=function(e){"Escape"===e.key&&this.closeAllMenus()},e.prototype.handleButtonKeyDown=function(e){var t=this.triggerNodes.indexOf(document.activeElement);this.useArrowKeys&&this.openIndex===t&&"ArrowDown"===e.key?(e.preventDefault(),this.controlledNodes[this.openIndex].querySelector("a").focus()):this.useArrowKeys&&this.controlFocusByKey(e,this.triggerNodes,t)},e.prototype.handleButtonClick=function(e){var t=e.target,o=this.triggerNodes.indexOf(t),n="true"===t.getAttribute("aria-expanded");this.closeFirstLevelMenus(this.triggerNodes[o]),this.toggleExpand(o,!n)},e.prototype.handleMenuKeyDown=function(e){if(null!==this.openIndex){var t=Array.prototype.slice.call(this.controlledNodes[this.openIndex].querySelectorAll("a")),o=t.indexOf(document.activeElement);this.useArrowKeys&&this.controlFocusByKey(e,t,o)}},e.prototype.updateKeyControls=function(e){this.useArrowKeys=e},e.prototype.closeFirstLevelMenus=function(e){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;e.classList.contains("toggle-level--1")&&t>=992&&this.closeAllMenus()}})();